function showModal(){const n=document.getElementById("openModal");n.click();localStorage.setItem(MODAL_KEY,Date.now());$("#openFeedbackModal").hide()}function closeAllModal(){$(".modal.show").each(function(){var n=bootstrap.Modal.getInstance(this);n&&n.hide()})}function checkScroll(){const n=document.getElementById("backToTop");document.body.scrollTop>200||document.documentElement.scrollTop>200?(n.classList.remove("e-hidden"),$(".zalo-chat").css("bottom","75px"),$(".call-phone").css("bottom","135px")):(n.classList.add("e-hidden"),$(".zalo-chat").css("bottom","20px"),$(".call-phone").css("bottom","75px"))}function getBootstrapBreakpoint(n){return(n=n|window.innerWidth,n<576)?"xs":n<768?"sm":n<992?"md":n<1200?"lg":n<1400?"xl":"xxl"}function showScreenSize(){const n=window.innerWidth,t=getBootstrapBreakpoint(n);console.log(`Width: ${n}px - Bootstrap: ${t}`)}function setCookie(n,t,i){let r="";if(i){let n=new Date;n.setTime(n.getTime()+i*864e5);r="; expires="+n.toUTCString()}document.cookie=n+"="+t+"; path=/"+r}function getCookie(n){let t=n+"=",i=document.cookie.split(";");for(let n=0;n<i.length;n++){let r=i[n].trim();if(r.indexOf(t)===0)return r.substring(t.length)}return null}function openInfoModal(){const n=new bootstrap.Modal(document.getElementById("infoModal"));bootstrap.Modal.getInstance(n)&&bootstrap.Modal.getInstance(n).dispose();n.show()}function resetFooterBtn(){$("#infoModal .modal-footer .btn-warning").removeClass("d-none")}function showInfo(n,t){t&&t.length>0?$("#infoModalLabel").text(t):$("#infoModalLabel").text("Thông báo");$("#infoModal #message-content").text(n);$(".infoModal-header").css("background-color","rgb(13,202,240)");$(".infoModal-header").css("color","white");resetFooterBtn();$("#infoModal .modal-footer .btn-warning").addClass("d-none");openInfoModal()}function showSuccess(n,t){t&&t.length>0?$("#infoModalLabel").text(t):$("#infoModalLabel").text("Thành công");$("#infoModal #message-content").text(n);$(".infoModal-header").css("background-color","Green");$(".infoModal-header").css("color","white");resetFooterBtn();$("#infoModal .modal-footer .btn-warning").addClass("d-none");openInfoModal()}function showConfirm(n,t){return new Promise(function(i){t&&t.length>0?$("#infoModalLabel").text(t):$("#infoModalLabel").text("Xác nhận");$("#infoModal #message-content").text(n);$(".infoModal-header").css("background-color","rgb(166,115,208)");$(".infoModal-header").css("color","white");resetFooterBtn();openInfoModal();$("#infoModal-confirm").off("click").on("click",function(){$("#infoModal").modal("hide");i(!0)});$("#infoModal").off("hidden.bs.modal").on("hidden.bs.modal",function(){i(!1)})})}function showError(n,t){t&&t.length>0?$("#infoModalLabel").text(t):$("#infoModalLabel").text("Lỗi");$("#infoModal #message-content").text(n);$(".infoModal-header").css("background-color","red");$(".infoModal-header").css("color","white");resetFooterBtn();$("#infoModal .modal-footer .btn-warning").addClass("d-none");openInfoModal()}function checkImageValidity(n){let t=n.getAttribute("src"),r="/assets/img/logo_image.png";if(!t||t.trim()===""){n.setAttribute("src",r);return}let i=new Image;i.src=t;i.onload=function(){};i.onerror=function(){n.setAttribute("src",r)}}function copyToClipboard(){navigator.clipboard.writeText(window.location.href).then(()=>{alert("Link đã được sao chép!")}).catch(n=>{console.error("Copy failed",n)})}function copyAndOpenInstagram(){const n=window.location.href;navigator.clipboard.writeText(n).then(()=>{alert("Link đã được sao chép! Mở Instagram để đăng bài."),window.open("https://www.instagram.com/","_blank")}).catch(n=>{console.error("Copy failed",n)})}function printArticle(){var t=document.querySelector("article").innerHTML,n=window.open("","_blank");n.document.write(`
            <html>
            <head>
                <title>In Bài Viết</title>
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    article { max-width: 800px; margin: auto; }
                    .d-flex { display: none; } /* Ẩn nút chia sẻ */
                </style>
            </head>
            <body onload="window.print(); window.close();">
                <article>${t}</article>
            </body>
            </html>
        `);n.document.close()}function initDatePicker(){if($(".input-group-datetimepicker").length){const n=new tempusDominus.TempusDominus($(".input-group-datetimepicker")[0],{display:{components:{calendar:!0,date:!0,month:!0,year:!0,clock:!1}},localization:{locale:"vi",format:"dd/MM/yyyy"},useCurrent:!0,restrictions:{minDate:new Date,maxDate:new Date((new Date).setDate((new Date).getDate()+365))}});$(document).off("click","#calendarIcon").on("click","#calendarIcon",function(){n&&n.show()})}}function bookFormLoading(){$.ajax({url:"/Contact/LoadBookForm",type:"Get",processData:!1,contentType:!1,success:function(n){$("#app-contact-content").html(n)},error:function(){showError(error)}})}(function(n){"use strict";var i=function(){n(".js-fullheight").css("height",n(window).height());n(window).resize(function(){n(".js-fullheight").css("height",n(window).height())})},t;i();t=function(){n(".home-slider").owlCarousel({loop:!0,autoplay:!0,margin:0,animateOut:"fadeOut",animateIn:"fadeIn",nav:!0,dots:!0,autoplayHoverPause:!1,items:1,navText:["<span class='ion-ios-arrow-back'><\/span>","<span class='ion-ios-arrow-forward'><\/span>"],responsive:{0:{items:1},600:{items:1},1e3:{items:1}}})};t()})(jQuery);const MODAL_KEY="lastModalTime",ONE_HOUR=36e5,lastTime=localStorage.getItem(MODAL_KEY),currentTime=Date.now();var searchModal=null;$(document).ready(function(){$(document).on("click","#close_button_modalOnloadDefaul",function(){$("#openFeedbackModal").show()});(!lastTime||currentTime-lastTime>ONE_HOUR)&&showModal();searchModal||(searchModal=new bootstrap.Modal($("#search-modal")[0],{keyboard:!0,backdrop:!0}));$(document).on("click","#openFeedbackModal",function(){showModal()});$(document).on("shown.bs.modal","#search-modal",function(){$("#search-input").focus()});$(document).on("click",".open-search-modal-btn, #search-input",function(){console.log("Button clicked! Opening modal...");closeAllModal();searchModal.show()});$(".actor-list").slick({slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3,dots:!1,arrows:!0,prevArrow:'<button type="button" class="slick-prev"><span>‹<\/span><\/button>',nextArrow:'<button type="button" class="slick-next"><span>›<\/span><\/button>',responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:576,settings:{slidesToShow:2}}]})});document.addEventListener("DOMContentLoaded",function(){console.log("DOM đã tải xong!");checkScroll();document.querySelectorAll("img").forEach(checkImageValidity);let n=new MutationObserver(()=>{});n.observe(document.body,{childList:!0,subtree:!0})});window.onscroll=function(){checkScroll()};document.getElementById("backToTop").addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})});window.addEventListener("load",showScreenSize);window.addEventListener("resize",showScreenSize);$(document).ready(function(){$(document).on("submit","#addContactMessage",function(n){n.preventDefault();const t=new FormData(this);var i=$(this);$.ajax({url:"/Contact/AddMessage",type:"POST",data:t,processData:!1,contentType:!1,success:function(n){n.isSuccessed?(i[0].reset(),$("#close_button_modalOnloadDefaul").click(),showSuccess("Gửi thông tin thành công!")):n.data&&$("#add_contact_message").html(n.data)},error:function(){alert("Lưu thất bại.")}})})});$(document).ready(function(){initDatePicker();$(document).on("submit","#frmBook",function(n){n.preventDefault();const t=new FormData(this);var i=$(this);$.ajax({url:"/Contact/Book",type:"POST",data:t,processData:!1,contentType:!1,success:function(n){n.isSuccessed?(i[0].reset(),$("#frmBook").find("input, textarea").val(""),$("#frmBook").find("select").val("0"),showSuccess("Gửi thông tin thành công!")):n&&($("#app-contact-content").html(n),initDatePicker())},error:function(){alert("Lưu thất bại.")}})})});$(document).ready(function(){function n(){}n()});$(document).ready(function(){var n=$(".slide-item").length;$(".doctor-list-item").slick({slidesToShow:4,slidesToScroll:1,autoplay:!1,autoplaySpeed:2e3,dots:!1,arrows:!0,infinite:n>4,centerMode:!0,centerPadding:"0px",responsive:[{breakpoint:768,settings:{slidesToShow:3,infinite:n>3,centerMode:!0,centerPadding:"40px"}},{breakpoint:480,settings:{slidesToShow:2,infinite:n>2,centerMode:!0,centerPadding:"40px"}},{breakpoint:1,settings:{slidesToShow:1,infinite:n>1,centerMode:!0,centerPadding:"40px"}}]});let t=new bootstrap.Carousel($("#carouselExampleAutoplaying")[0]);$(".doctor-list-item").on("click",".slide-item",function(){let n=$(this).closest(".slick-slide").data("slide-item");$(".doctor-list-item").slick("slickGoTo",n);t.to(n)});$("#carouselExampleAutoplaying").on("click",".carousel-li-item",function(){let n=$(this).data("bs-slide-to");$(".doctor-list-item").slick("slickGoTo",n)});$("#carouselExampleAutoplaying").on("slid.bs.carousel",function(n){let t=n.to;$(".doctor-list-item").slick("slickGoTo",t)})});$(document).ready(function(){function u(){i&&(clearInterval(i),i=null);i=setInterval(()=>{console.log("lv3 = ",n.lv3),n.lv3!="active"&&f(n),clearInterval(i),i=null},200)}function f(t){$('[class*="menu-lv3"]').stop(!0,!0).fadeOut(200);$('[class*="ul-lv3-"]').stop(!0,!0).fadeOut(200);t.lv2&&($(".li-lv2").removeClass("lv2-active"),$(".i-caret-r-"+n.lv2).removeClass("i-hidden"),$(".i-caret-r-"+n.lv2).addClass("i-visible"),$(".i-caret-l-"+n.lv2).removeClass("i-visible"),$(".i-caret-l-"+n.lv2).addClass("i-hidden"),t.lv2=null,t.lv3=null,console.log("reset done = ",n.lv2))}function e(){$(".nav-li-0").removeClass("show");$(".nav-li-0 .dropdown-menu").removeClass("show");$(".nav-li-0").removeClass("dropdown");$(window).width()>=980&&$(".nav-li-0").toggleClass("dropdown");$(".navbar .nav-li-0 > a").click(function(){$(window).width()>=980||(t.push(this),setTimeout(()=>{if(t&&t.length>0){var n=t[t.length-1];t=[];o(n)}},100))})}function o(n){var r=$(n).parent().hasClass("show"),i;if(r){$(n).parent().removeClass("show");$(n).parent().find(".dropdown-menu").removeClass("show");return}$(".nav-li-0").removeClass("show");$(".nav-li-0 .dropdown-menu").removeClass("show");$(n).parent().toggleClass("show");$(n).parent().find(".dropdown-menu").toggleClass("show");t&&t.length>0&&(i=t[t.length-1],t=[],o(i))}var t=[],n={lv2:null,lv3:null},i=null;$('[class*="li-lv2-hover-"]').hover(function(){i&&(clearInterval(i),i=null);let t=$(this).attr("class").match(/li-lv2-hover-(\d+)/);if(t){var r=t[1];r!=n.lv2&&(n.lv2&&f(n),$(this).addClass("lv2-active"),n.lv2=r,n.lv3=null,setTimeout(()=>{n.lv2&&($(".ul-lv3-"+n.lv2).stop(!0,!0).fadeIn(200),$(".i-caret-l-"+n.lv2).removeClass("i-hidden"),$(".i-caret-l-"+n.lv2).addClass("i-visible"),$(".i-caret-r-"+n.lv2).removeClass("i-visible"),$(".i-caret-r-"+n.lv2).addClass("i-hidden"),$(".menu-lv3").stop(!0,!0).fadeIn(200))},200))}},function(){console.log("lv2 out = ");u()});$('[class*="menu-lv3').hover(function(){n.lv3="active"},function(){n.lv3="non-active";u()});$(window).resize(function(){e();$(".navbar .dropdown-toggle").hover(function(){var n=$(window).width(),t;n<980||(t=$(window).width(),$(this).parent().toggleClass("show"),$(this).parent().find(".dropdown-menu").toggleClass("show"))});$(".navbar .dropdown-menu").mouseleave(function(){var n=$(window).width();n<980||$(this).removeClass("show")})});const r=document.querySelector(".navbar-mega");window.addEventListener("scroll",()=>{const n=window.pageYOffset;n>390&&(r.classList.add("sticky-top"),setTimeout(()=>{r.classList.add("navbar-mega-visible")},100));n<100&&(r.classList.remove("sticky-top"),r.classList.remove("navbar-mega-visible"))});e()});document.querySelectorAll(".expand-btn").forEach(n=>{n.addEventListener("click",function(){const n=this.querySelector("i"),t=n.classList.contains("fa-chevron-down");t?(n.classList.remove("fa-chevron-down"),n.classList.add("fa-chevron-up")):(n.classList.remove("fa-chevron-up"),n.classList.add("fa-chevron-down"))})});