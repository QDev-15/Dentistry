@using Dentistry.ViewModels.Enums
@using Dentistry.ViewModels.Catalog.Categories
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model CategoryDetailVm
<div class="container-fluid image-banner p-0">
    <img src="@Model.category.Image?.Path" />
</div>
<div class="container-fluid">
    <div class="container box_breadcrumb">
        <ul class="breadcrumb">
            <li><a href="/">Trang chủ</a></li>
            <li><a asp-action="Detail" asp-asp-controller="Category"
                    asp-route-danhmuc="@Model.category.Type.GetAliasDisplayName()" asp-route-alias="@Model.category.Alias"
                    title="@Model.category.Name">
                    @Model.category.Name
                </a>
            </li>
        </ul>
    </div>
</div>
@{
    if (Model.category.ChildCategories.Any())
    {
        <div class="container-fluid p-0 box_categories">
            <div class="container">
                @{
                    Html.RenderPartial("~/Views/ViewComponents/HomeCategory.cshtml", @Model.category.ChildCategories.ToList());
                }
            </div>
        </div>

    }
}
<div class="container-fluid p-0 pt-5 pb-5">
    <div class="container">
        @Html.Raw(Model.category.Decription)
    </div>
</div>
@* Bài viết liên quan *@

<div class="container-fluid p-0 pb-5" style="background: #fbfbfb;">
    <div class="container">
        <div class="box_title py-5"> Bài viết liên quan</div>
        <div class="box_content box_list_item">
            <div class="row">
                @foreach (var item in Model.articles)
                {
                    var type = item.Type.GetAliasDisplayName();
                    var imgPath = item.Images.Any() ? item.Images[item.Images.Count - 1].Path : "";
                    <div class="col-sm-3 col-6">
                        <div class="item pt-5">
                            <div class="image" style="background-image: url('@imgPath'), url('../assets/img/no-image.jpg')">
                                <a asp-action="Articles" asp-controller="Article" asp-route-alias="@item.Alias"
                                    title="@item.Title">
                                    <span>Xem thêm</span>
                                </a>
                            </div>
                            <div class="info pt-5">
                                <h3 class="title">
                                    <a asp-action="Articles" asp-controller="Article" asp-route-alias="@item.Alias"
                                       title="@item.Title">
                                       @item.Title.LimitTo(50, "...")
                                    </a>
                                </h3>
                                <div class="desc">@item.Description.LimitTo(200, "...")</div>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
    </div>
</div>
